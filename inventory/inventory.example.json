{
    "all": {
        "cluster_metadata": {
            "name": "micro-cluster",
            "description": "HPC micro-cluster driven by Ansible automation."
        },
        "children": {
            "controller": {
                "hosts": {
                    "head": {
                        "ansible_host": "localhost",
                        "ansible_connection": "local",
                        "ansible_python_interpreter": "/usr/bin/python3",
                        "cluster_role": "controller",
                        "pxe_iface": "enp5s0",
                        "pxe_server_ip": "10.0.0.1",
                        "pxe_install_drive": "nvme0n1",
                        "pxe_default_target": "fresh",
                        "pxe_ipxe_menu_items": [
                            {
                                "key": "i",
                                "label": "Fresh install",
                                "target": "fresh"
                            },
                            {
                                "key": "l",
                                "label": "Boot from NVMe",
                                "target": "local"
                            }
                        ],
                        "ansible_become": true,
                        "ansible_become_method": "sudo",
                        "ansible_become_user": "root"
                    }
                }
            },
            "compute": {
                "hosts": {
                    "node01": {
                        "ansible_host": "10.0.0.11",
                        "ansible_connection": "ssh",
                        "ansible_user": "ansible",
                        "ansible_python_interpreter": "/usr/bin/python3",
                        "cluster_role": "compute",
                        "nic_mac": [
                            "84:47:09:4d:5b:d6"
                        ]
                    },
                    "node02": {
                        "ansible_host": "10.0.0.12",
                        "ansible_connection": "ssh",
                        "ansible_user": "ansible",
                        "ansible_python_interpreter": "/usr/bin/python3",
                        "cluster_role": "compute",
                        "nic_mac": [
                            "84:47:09:4d:57:37"
                        ]
                    },
                    "node03": {
                        "ansible_host": "10.0.0.13",
                        "ansible_connection": "ssh",
                        "ansible_user": "ansible",
                        "ansible_python_interpreter": "/usr/bin/python3",
                        "cluster_role": "compute",
                        "nic_mac": [
                            "84:47:09:4d:51:76"
                        ]
                    }
                }
            }
        },
        "vars": {
            "cluster_name": "micro-cluster",
            "cluster_description": "HPC micro-cluster driven by Ansible automation.",
            "cluster_repo_root": "/root/work/rocky-cluster-provisioner",
            "cluster_config_root": "/root/work/rocky-cluster-provisioner/config",
            "cluster_roles": {
                "controller": {
                    "stack": [
                        "controller_common",
                        "controller",
                        "pxe"
                    ]
                },
                "compute": {
                    "stack": [
                        "compute_common"
                    ]
                }
            },
            "network_config": {
                "pxe_iface": "enp5s0",
                "server_ip": "10.0.0.1",
                "subnet": "10.0.0.0/24",
                "netmask": "255.255.255.0",
                "gateway": null,
                "dns": "8.8.8.8",
                "firewall_allowed_subnets": [
                    "10.0.0.0/24",
                    "192.168.68.0/24"
                ],
                "dhcp_range": {
                    "start": "10.0.0.10",
                    "end": "10.0.0.15"
                }
            },
            "pxe_config": {
                "username": "ansible",
                "vendor": "rocky",
                "image": "rocky9_minimal",
                "install": {
                    "drive": "nvme0n1"
                },
                "paths": {
                    "iso_dir": "/srv/pxe/iso",
                    "iso_mount": "/var/www/html/os",
                    "http_root": "/var/www/html",
                    "tftp_root": "/srv/tftp"
                },
                "packages": {
                    "base": [
                        "dnsmasq",
                        "tftp-server",
                        "httpd",
                        "ipxe-bootimgs",
                        "rsync",
                        "python3-libselinux",
                        "policycoreutils-python-utils"
                    ],
                    "efi": []
                },
                "ipxe": {
                    "default_target": "fresh",
                    "timeout_ms": 5000,
                    "menu": [
                        {
                            "key": "i",
                            "label": "Fresh install",
                            "target": "fresh"
                        },
                        {
                            "key": "l",
                            "label": "Boot from NVMe",
                            "target": "local"
                        }
                    ]
                }
            },
            "images": {
                "rocky9_minimal": {
                    "name": "Rocky-9.7-x86_64-minimal.iso",
                    "url": "https://download.rockylinux.org/pub/rocky/9/isos/x86_64/Rocky-9.7-x86_64-minimal.iso",
                    "kernel": "os/images/pxeboot/vmlinuz",
                    "initrd": "os/images/pxeboot/initrd.img",
                    "vendor": "rocky",
                    "description": "Rocky Linux 9 minimal image.",
                    "checksum": "sha256:23a1ac1175d8ccada7195863914ef1237f584ff25f73bd53da410d5fffd882b0"
                }
            },
            "pxe_runtime_credentials": {
                "username": "ansible",
                "root_password_hash": "GENERATED_HASH_FROM_DOTENV_FILE",
                "local_user_password_hash": "GENERATED_HASH_FROM_DOTENV_FILE"
            }
        }
    }
}